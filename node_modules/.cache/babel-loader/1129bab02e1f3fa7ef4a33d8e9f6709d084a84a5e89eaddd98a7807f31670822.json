{"ast":null,"code":"import{useState,useEffect}from\"react\";import axios from\"axios\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const BASE_API=`https://studies.cs.helsinki.fi/restcountries/api/all`;const WEATHER_API=`https://api.openweathermap.org/data/2.5/weather?`;const WEATHER_API_KEY=process.env.REACT_APP_WEATHER_KEY;const[countriesList,setCountriesList]=useState([]);const[searchCountry,setSearchCountry]=useState(\"\");const[weather,setWeather]=useState(null);useEffect(()=>{if(countriesList.length===0){axios.get(BASE_API).then(response=>setCountriesList(response.data));}if(matchingCountries.length===1){const country=matchingCountries[0];axios.get(`${WEATHER_API}lat=${country.capitalInfo.latlng[0]}&lon=${country.capitalInfo.latlng[1]}&units=metric&appid=${WEATHER_API_KEY}`).then(response=>setWeather(response.data));}// eslint-disable-next-line\n},[searchCountry]);const matchingCountries=countriesList.filter(country=>country.name.common.toUpperCase().includes(searchCountry.toUpperCase()));const handleSearchInputChange=event=>{console.log(`setting search, and render`);setSearchCountry(event.target.value);};const CountriesInfo=()=>{if(matchingCountries.length>10)return/*#__PURE__*/_jsx(\"p\",{children:\" Too many matches. please specify \"});if(matchingCountries.length<=10&&matchingCountries.length>1)return/*#__PURE__*/_jsx(SimilarCountriesList,{countries:matchingCountries});if(matchingCountries.length===1)return/*#__PURE__*/_jsx(Country,{country:countriesList.filter(country=>country.cca3===matchingCountries[0].cca3)[0]});};const SimilarCountriesList=_ref=>{let{countries}=_ref;return/*#__PURE__*/_jsx(\"ul\",{children:countries.map(country=>/*#__PURE__*/_jsxs(\"li\",{children:[\" \",country.name.common,\"  \",/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSearchCountry(country.name.common),children:\"show\"}),\" \"]},country.cca3))});};const Country=_ref2=>{let{country}=_ref2;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\" \",country.name.common,\" \"]}),/*#__PURE__*/_jsx(\"img\",{alt:\"Country-Flag\",src:country.flags.png}),/*#__PURE__*/_jsxs(\"p\",{children:[\" \",/*#__PURE__*/_jsx(\"b\",{children:\"Capital: \"}),\" \",country.capital[0],\" \"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\" \",/*#__PURE__*/_jsx(\"b\",{children:\"Area: \"}),\" \",country.area,\" \"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\" \",/*#__PURE__*/_jsx(\"b\",{children:\"Languages: \"}),\" \"]}),/*#__PURE__*/_jsx(\"ul\",{children:Object.values(country.languages).map((language,index)=>/*#__PURE__*/_jsxs(\"li\",{children:[\" \",language,\" \"]},index))}),/*#__PURE__*/_jsx(\"hr\",{}),weather!==null&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Weather in capital \\\"\",country.capital[0],\"\\\":\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\" \",/*#__PURE__*/_jsx(\"b\",{children:\"Weather:\"}),\" \",weather.weather[0].main,\"/\",weather.weather[0].description]}),/*#__PURE__*/_jsx(\"img\",{alt:\"Weather-Icon\",src:`https://openweathermap.org/img/wn/${weather.weather[0].icon}@2x.png`}),/*#__PURE__*/_jsxs(\"p\",{children:[\" \",/*#__PURE__*/_jsx(\"b\",{children:\"Temperature:\"}),\" \",weather.main.temp,\"\\xB0C\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\" \",/*#__PURE__*/_jsx(\"b\",{children:\"Wind:\"}),\" \",weather.wind.speed,\" meters/sec\"]})]})]});};return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(\"h1\",{style:{textDecoration:\"underline\"},children:\"WEATHER APP\"}),/*#__PURE__*/_jsx(\"input\",{onChange:handleSearchInputChange}),countriesList.length===0&&/*#__PURE__*/_jsx(\"p\",{children:\" Getting Info... \"}),/*#__PURE__*/_jsx(CountriesInfo,{})]});}export default App;","map":{"version":3,"names":["useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","App","BASE_API","WEATHER_API","WEATHER_API_KEY","process","env","REACT_APP_WEATHER_KEY","countriesList","setCountriesList","searchCountry","setSearchCountry","weather","setWeather","length","get","then","response","data","matchingCountries","country","capitalInfo","latlng","filter","name","common","toUpperCase","includes","handleSearchInputChange","event","console","log","target","value","CountriesInfo","children","SimilarCountriesList","countries","Country","cca3","_ref","map","onClick","_ref2","alt","src","flags","png","capital","area","Object","values","languages","language","index","main","description","icon","temp","wind","speed","className","style","textDecoration","onChange"],"sources":["/home/argenisjimort/code/countries-data-standalone/src/App.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport axios from \"axios\";\n\nfunction App() {\n\n\n  const BASE_API = `https://studies.cs.helsinki.fi/restcountries/api/all`;\n  const WEATHER_API = `https://api.openweathermap.org/data/2.5/weather?`;\n  const WEATHER_API_KEY = process.env.REACT_APP_WEATHER_KEY;\n\n\n  const [countriesList, setCountriesList] = useState([]);\n  const [searchCountry, setSearchCountry] = useState(\"\");\n  const [weather, setWeather] = useState(null);\n\n  useEffect ( () => {\n\n    if ( countriesList.length === 0) {\n      axios.get(BASE_API).then( response => setCountriesList( response.data ) );\n    }\n\n    if ( matchingCountries.length === 1 ) {\n      const country = matchingCountries[0];\n      axios.get( `${WEATHER_API}lat=${country.capitalInfo.latlng[0]}&lon=${country.capitalInfo.latlng[1]}&units=metric&appid=${WEATHER_API_KEY}` )\n        .then( response => setWeather(response.data) );\n    }\n\n    // eslint-disable-next-line\n  }, [searchCountry] );\n\n\n  const matchingCountries = countriesList.filter( country => country.name.common.toUpperCase().includes( searchCountry.toUpperCase() ) );\n\n\n  const handleSearchInputChange = (event) => {\n    console.log( `setting search, and render` );\n    setSearchCountry( event.target.value );\n  }\n\n\n  const CountriesInfo = () => {\n      if (matchingCountries.length > 10) return <p> Too many matches. please specify </p>\n      if (matchingCountries.length <= 10 && matchingCountries.length > 1 ) return <SimilarCountriesList countries={ matchingCountries } />\n      if (matchingCountries.length === 1) return <Country country={ countriesList.filter( country => country.cca3 === matchingCountries[0].cca3 )[0] } />\n  } \n  \n\n  const SimilarCountriesList = ({countries}) => {\n    return (\n      <ul>\n        { countries.map( country => <li key={country.cca3} > {country.name.common}  <button onClick={ () => setSearchCountry( country.name.common ) } >show</button> </li> ) }\n      </ul>\n    )\n  }\n\n  const Country = ({country}) => {\n    return (\n      <div>\n        <h2> {country.name.common} </h2>\n        <img alt=\"Country-Flag\" src={country.flags.png} />\n        <p> <b>Capital: </b> {country.capital[0]} </p>\n        <p> <b>Area: </b> {country.area} </p>\n        <p> <b>Languages: </b> </p>\n        <ul>\n          { Object.values( country.languages ).map ( (language, index) => <li key={index} > {language} </li> ) }\n        </ul>\n        <hr></hr>\n        { weather !== null &&\n        <div>\n          <h3>Weather in capital \"{country.capital[0]}\":</h3> \n          <p> <b>Weather:</b> {weather.weather[0].main}/{weather.weather[0].description}</p>\n          <img alt=\"Weather-Icon\" src={`https://openweathermap.org/img/wn/${weather.weather[0].icon}@2x.png`} />\n          <p> <b>Temperature:</b> {weather.main.temp}Â°C</p>\n          <p> <b>Wind:</b> {weather.wind.speed} meters/sec</p>\n\n        </div>\n        }\n\n\n      </div>\n    )\n  }\n\n\n  return (\n    <div className=\"App\">\n      <h1 style={{textDecoration: \"underline\"}}>WEATHER APP</h1>\n      <input onChange={handleSearchInputChange} />\n      { countriesList.length === 0 && <p> Getting Info... </p>}\n      <CountriesInfo />\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}